<!DOCTYPE html>
<html>
<head>
    <title>Reddit - Dive into anything</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            margin: 0; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #0c1416;
            color: #d7dadc;
        }
        .header { 
            background: #ff4500; 
            color: white; 
            padding: 10px 20px; 
            font-size: 24px; 
            font-weight: bold;
        }
        .content { 
            padding: 20px;
        }
        .post { 
            background: #1a1a1b; 
            margin: 10px 0; 
            padding: 15px; 
            border-radius: 4px;
            border: 1px solid #343536;
        }
        .post-title { 
            font-size: 18px; 
            font-weight: bold; 
            margin-bottom: 8px;
        }
        .post-meta { 
            color: #818384; 
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="header">reddit</div>
    <div class="content">
        <div class="post">
            <div class="post-title">This is a fake Reddit post that should be replaced</div>
            <div class="post-meta">Posted 2 hours ago by u/testuser</div>
        </div>
        <div class="post">
            <div class="post-title">Another fake post with Reddit content</div>
            <div class="post-meta">Posted 4 hours ago by u/anotheruser</div>
        </div>
        <div class="post">
            <div class="post-title">More Reddit content to be obliterated by Nazarick</div>
            <div class="post-meta">Posted 1 day ago by u/redditor</div>
        </div>
    </div>

    <!-- Inject our userscript for testing -->
    <script>
        // Simulate the userscript running at document-start
        (function() {
            'use strict';

            // Fragment shader source - Nazarick Guardian-themed shader with all Floor Guardians
            const fragmentShaderSource = `
                precision highp float;
                uniform float u_time;
                uniform vec2 u_resolution;
                
                // Noise function for organic patterns
                float noise(vec2 p) {
                    return sin(p.x * 10.0) * sin(p.y * 10.0);
                }
                
                // Improved noise for complex patterns
                float fbm(vec2 p) {
                    float value = 0.0;
                    float amplitude = 0.5;
                    float frequency = 1.0;
                    for(int i = 0; i < 5; i++) {
                        value += amplitude * sin(frequency * p.x) * sin(frequency * p.y);
                        amplitude *= 0.5;
                        frequency *= 2.0;
                    }
                    return value;
                }
                
                // Rose pattern for Shalltear
                float rose(vec2 p, float time) {
                    float r = length(p);
                    float a = atan(p.y, p.x);
                    float petals = sin(6.0 * a + time) * 0.3 + 0.7;
                    return smoothstep(petals * 0.4, petals * 0.5, r);
                }
                
                // Crystalline pattern for Cocytus
                float crystal(vec2 p, float time) {
                    vec2 hexCoord = p * 8.0;
                    vec2 hexCenter = floor(hexCoord) + 0.5;
                    vec2 hexLocal = hexCoord - hexCenter;
                    float hexDist = max(abs(hexLocal.x), abs(hexLocal.y * 0.866 + hexLocal.x * 0.5));
                    return step(0.3 + 0.1 * sin(time * 2.0), hexDist);
                }
                
                // Organic patterns for Aura & Mare
                float organic(vec2 p, float time) {
                    vec2 q = p * 4.0;
                    q.x += sin(time + q.y * 2.0) * 0.3;
                    q.y += cos(time + q.x * 1.5) * 0.2;
                    return smoothstep(0.3, 0.7, fbm(q + time * 0.5));
                }
                
                // Noble geometric pattern for Sebas
                float noble(vec2 p, float time) {
                    vec2 grid = abs(fract(p * 6.0) - 0.5);
                    float pattern = min(grid.x, grid.y);
                    return smoothstep(0.1, 0.2, pattern) * (0.8 + 0.2 * sin(time * 3.0));
                }
                
                // Shifting liquid pattern for Pandora's Actor
                float liquid(vec2 p, float time) {
                    vec2 q = p * 3.0;
                    q.x += sin(time * 2.0 + q.y * 4.0) * 0.4;
                    q.y += cos(time * 1.5 + q.x * 3.0) * 0.3;
                    float ripple = sin(length(q) * 8.0 - time * 4.0) * 0.5 + 0.5;
                    return ripple;
                }
                
                // Infernal flames for Demiurge
                float infernal(vec2 p, float time) {
                    vec2 flameCoord = p;
                    flameCoord.y += time * 0.5;
                    flameCoord.x += sin(flameCoord.y * 6.0 + time * 2.0) * 0.2;
                    float flame = sin(flameCoord.y * 10.0) * sin(flameCoord.x * 8.0);
                    flame += sin(flameCoord.y * 15.0 + time * 3.0) * 0.5;
                    return smoothstep(0.3, 0.8, flame);
                }
                
                // Clockwork patterns for floors
                float clockwork(vec2 p, float time) {
                    float gear1 = step(0.4, sin(length(p * 12.0) + time * 2.0));
                    float gear2 = step(0.3, sin(length(p * 8.0) - time * 1.5));
                    return max(gear1, gear2) * 0.3;
                }
                
                // Albedo's angelic pattern - always visible, serene and protective
                float albedo(vec2 p, float time) {
                    float r = length(p);
                    float a = atan(p.y, p.x);
                    // Wing-like patterns
                    float wings = sin(6.0 * a + time * 0.5) * 0.1 + 0.9;
                    wings *= smoothstep(0.8, 0.4, r);
                    // Gentle radiance
                    float radiance = 1.0 - smoothstep(0.0, 1.2, r);
                    radiance *= 0.7 + 0.3 * sin(time * 0.8);
                    return max(wings, radiance * 0.6);
                }
                
                void main() {
                    vec2 uv = (gl_FragCoord.xy - 0.5 * u_resolution.xy) / min(u_resolution.y, u_resolution.x);
                    float time = u_time * 0.3;
                    
                    // Create different regions for each Guardian
                    vec2 p1 = uv + vec2(sin(time * 0.7), cos(time * 0.5)) * 0.3; // Shalltear region
                    vec2 p2 = uv + vec2(cos(time * 0.8), sin(time * 0.6)) * 0.4; // Cocytus region
                    vec2 p3 = uv + vec2(sin(time * 0.5) * 0.2, cos(time * 0.9) * 0.3); // Aura & Mare region
                    vec2 p4 = uv + vec2(cos(time * 0.6) * 0.25, sin(time * 0.7) * 0.2); // Sebas region
                    vec2 p5 = uv + vec2(sin(time * 1.2) * 0.4, cos(time * 1.1) * 0.35); // Pandora's Actor region
                    vec2 p6 = uv + vec2(sin(time * 0.9) * 0.3, cos(time * 0.8) * 0.4); // Demiurge region
                    
                    // Calculate Guardian patterns
                    float shalltearPattern = rose(p1, time) * (0.7 + 0.3 * sin(time * 2.0));
                    float cocytusPattern = crystal(p2, time) * (0.8 + 0.2 * cos(time * 1.5));
                    float auraPattern = organic(p3, time) * (0.6 + 0.4 * sin(time * 1.8));
                    float sebasPattern = noble(p4, time);
                    float pandoraPattern = liquid(p5, time) * (0.9 + 0.1 * sin(time * 3.0));
                    float demiurgePattern = infernal(p6, time) * (0.8 + 0.2 * sin(time * 4.0));
                    float clockworkPattern = clockwork(uv, time);
                    
                    // Albedo's protective presence - always visible in center
                    float albedoPattern = albedo(uv * 0.7, time);
                    
                    // Guardian colors
                    vec3 shalltearColor = vec3(0.8, 0.1, 0.2) * shalltearPattern; // Crimson
                    vec3 cocytusColor = vec3(0.1, 0.4, 0.9) * cocytusPattern; // Icy blue
                    vec3 auraColor = vec3(0.2, 0.7, 0.3) * auraPattern; // Earthy green
                    vec3 sebasColor = vec3(0.7, 0.7, 0.8) * sebasPattern; // Noble silver
                    vec3 pandoraColor = vec3(0.9, 0.8, 0.2) * pandoraPattern; // Liquid gold
                    vec3 demiurgeColor = vec3(0.9, 0.3, 0.1) * demiurgePattern; // Infernal red
                    vec3 clockworkColor = vec3(0.5, 0.4, 0.3) * clockworkPattern; // Brass
                    
                    // Albedo's radiant white/gold - always visible
                    vec3 albedoColor = vec3(0.95, 0.9, 0.7) * albedoPattern;
                    
                    // Combine all Guardian essences
                    vec3 finalColor = albedoColor; // Start with Albedo as the base
                    finalColor += shalltearColor * 0.8;
                    finalColor += cocytusColor * 0.7;
                    finalColor += auraColor * 0.6;
                    finalColor += sebasColor * 0.5;
                    finalColor += pandoraColor * 0.9;
                    finalColor += demiurgeColor * 0.8;
                    finalColor += clockworkColor * 0.4;
                    
                    // Add swirling motifs
                    float swirl = sin(length(uv) * 8.0 - time * 3.0) * 0.1 + 0.9;
                    finalColor *= swirl;
                    
                    // Depth and atmosphere
                    float depth = 1.0 - length(uv) * 0.3;
                    finalColor *= depth;
                    
                    // Demiurge's wrath flashes
                    float wrathFlash = smoothstep(0.8, 1.0, sin(time * 5.0)) * 0.3;
                    finalColor += vec3(1.0, 0.2, 0.0) * wrathFlash;
                    
                    // Ensure Albedo remains visible and serene
                    finalColor = mix(finalColor, albedoColor, albedoPattern * 0.4);
                    
                    gl_FragColor = vec4(finalColor, 1.0);
                }
            `;

            const vertexShaderSource = `
                attribute vec2 a_position;
                void main() {
                    gl_Position = vec4(a_position, 0.0, 1.0);
                }
            `;

            function createShader(gl, type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    console.error('Shader compilation error:', gl.getShaderInfoLog(shader));
                    gl.deleteShader(shader);
                    return null;
                }
                
                return shader;
            }

            function createProgram(gl, vertexShader, fragmentShader) {
                const program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                
                if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                    console.error('Program linking error:', gl.getProgramInfoLog(program));
                    gl.deleteProgram(program);
                    return null;
                }
                
                return program;
            }

            function setupWebGL() {
                const canvas = document.getElementById('shader-canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                
                if (!gl) {
                    console.error('WebGL not supported');
                    return null;
                }

                // Create shaders
                const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);
                const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);
                
                if (!vertexShader || !fragmentShader) {
                    return null;
                }

                // Create program
                const program = createProgram(gl, vertexShader, fragmentShader);
                if (!program) {
                    return null;
                }

                // Set up geometry (full screen quad)
                const positionBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
                    -1, -1,
                     1, -1,
                    -1,  1,
                     1,  1,
                ]), gl.STATIC_DRAW);

                const positionLocation = gl.getAttribLocation(program, 'a_position');
                const timeLocation = gl.getUniformLocation(program, 'u_time');
                const resolutionLocation = gl.getUniformLocation(program, 'u_resolution');

                return {
                    gl,
                    program,
                    positionLocation,
                    timeLocation,
                    resolutionLocation,
                    positionBuffer
                };
            }

            function resizeCanvas() {
                const canvas = document.getElementById('shader-canvas');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            function render(webglData) {
                if (!webglData) return;
                
                const { gl, program, positionLocation, timeLocation, resolutionLocation, positionBuffer } = webglData;
                
                resizeCanvas();
                gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
                
                gl.clear(gl.COLOR_BUFFER_BIT);
                gl.useProgram(program);
                
                // Set uniforms
                gl.uniform1f(timeLocation, performance.now() * 0.001);
                gl.uniform2f(resolutionLocation, gl.canvas.width, gl.canvas.height);
                
                // Set up position attribute
                gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                gl.enableVertexAttribArray(positionLocation);
                gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
                
                // Draw
                gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
                
                requestAnimationFrame(() => render(webglData));
            }

            // Replace page content with Nazarick-themed overlay
            document.documentElement.innerHTML = `
                <head>
                    <title>Nazarick Dominion</title>
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap');
                        
                        body {
                            margin: 0;
                            padding: 0;
                            height: 100vh;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            font-family: 'Cinzel', serif;
                            overflow: hidden;
                            background: #000;
                        }
                        
                        #shader-canvas {
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            z-index: -1;
                        }
                        
                        .message-overlay {
                            background: rgba(10, 5, 15, 0.95);
                            color: #d4af37;
                            padding: 50px 70px;
                            border-radius: 0;
                            text-align: center;
                            box-shadow: 
                                0 0 30px rgba(212, 175, 55, 0.7),
                                inset 0 0 30px rgba(212, 175, 55, 0.2),
                                0 0 60px rgba(212, 175, 55, 0.4),
                                0 0 100px rgba(0, 0, 0, 0.8);
                            backdrop-filter: blur(5px);
                            border: 3px solid #d4af37;
                            z-index: 10;
                            position: relative;
                            transform: perspective(1000px) rotateX(3deg);
                            animation: nazarickGlow 3s ease-in-out infinite alternate;
                            max-width: 80vw;
                        }
                        
                        .message-overlay::before {
                            content: '';
                            position: absolute;
                            top: -3px;
                            left: -3px;
                            right: -3px;
                            bottom: -3px;
                            background: linear-gradient(45deg, #d4af37, #8b0000, #d4af37, #4b0082, #d4af37);
                            background-size: 300% 300%;
                            z-index: -1;
                            animation: borderFlow 4s linear infinite;
                            border-radius: inherit;
                        }
                        
                        .message-overlay::after {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: 
                                repeating-linear-gradient(
                                    0deg,
                                    transparent,
                                    transparent 3px,
                                    rgba(212, 175, 55, 0.05) 3px,
                                    rgba(212, 175, 55, 0.05) 6px
                                );
                            pointer-events: none;
                            animation: gothicScanlines 0.15s linear infinite;
                        }
                        
                        .message-overlay h1 {
                            margin: 0 0 20px 0;
                            font-size: 2.8em;
                            font-weight: 700;
                            font-family: 'Cinzel', serif;
                            text-shadow: 
                                0 0 10px #d4af37,
                                0 0 20px #d4af37,
                                0 0 30px #d4af37,
                                0 0 40px #8b0000,
                                2px 2px 0px #000,
                                4px 4px 0px rgba(0,0,0,0.5);
                            letter-spacing: 3px;
                            line-height: 1.2;
                            animation: supremeGlow 2s ease-in-out infinite alternate;
                            color: #fff;
                        }
                        
                        .decree {
                            font-size: 1.3em;
                            color: #d4af37;
                            font-weight: 400;
                            text-transform: uppercase;
                            letter-spacing: 2px;
                            margin-bottom: 15px;
                            text-shadow: 
                                0 0 5px #d4af37,
                                0 0 10px #d4af37,
                                1px 1px 0px #000;
                            animation: decreeFlicker 1.5s ease-in-out infinite alternate;
                        }
                        
                        .command {
                            font-size: 1.1em;
                            color: #c9b037;
                            font-weight: 600;
                            letter-spacing: 1px;
                            margin-top: 15px;
                            text-shadow: 
                                0 0 8px #c9b037,
                                1px 1px 0px #000;
                            animation: commandPulse 2.5s ease-in-out infinite;
                        }
                        
                        @keyframes nazarickGlow {
                            0% { 
                                box-shadow: 
                                    0 0 30px rgba(212, 175, 55, 0.7),
                                    inset 0 0 30px rgba(212, 175, 55, 0.2),
                                    0 0 60px rgba(212, 175, 55, 0.4),
                                    0 0 100px rgba(0, 0, 0, 0.8);
                            }
                            100% { 
                                box-shadow: 
                                    0 0 50px rgba(212, 175, 55, 0.9),
                                    inset 0 0 50px rgba(212, 175, 55, 0.3),
                                    0 0 100px rgba(212, 175, 55, 0.6),
                                    0 0 150px rgba(139, 0, 0, 0.4);
                            }
                        }
                        
                        @keyframes borderFlow {
                            0% { background-position: 0% 0%; }
                            50% { background-position: 100% 100%; }
                            100% { background-position: 0% 0%; }
                        }
                        
                        @keyframes gothicScanlines {
                            0% { transform: translateY(0); }
                            100% { transform: translateY(6px); }
                        }
                        
                        @keyframes supremeGlow {
                            0% { 
                                text-shadow: 
                                    0 0 10px #d4af37,
                                    0 0 20px #d4af37,
                                    0 0 30px #d4af37,
                                    0 0 40px #8b0000,
                                    2px 2px 0px #000,
                                    4px 4px 0px rgba(0,0,0,0.5);
                            }
                            100% { 
                                text-shadow: 
                                    0 0 15px #fff,
                                    0 0 25px #d4af37,
                                    0 0 35px #d4af37,
                                    0 0 50px #8b0000,
                                    0 0 60px #4b0082,
                                    2px 2px 0px #000,
                                    4px 4px 0px rgba(0,0,0,0.7);
                            }
                        }
                        
                        @keyframes decreeFlicker {
                            0% { 
                                opacity: 0.9;
                                text-shadow: 
                                    0 0 5px #d4af37,
                                    0 0 10px #d4af37,
                                    1px 1px 0px #000;
                            }
                            100% { 
                                opacity: 1;
                                text-shadow: 
                                    0 0 8px #d4af37,
                                    0 0 15px #d4af37,
                                    0 0 20px #8b0000,
                                    1px 1px 0px #000;
                            }
                        }
                        
                        @keyframes commandPulse {
                            0% { 
                                transform: scale(1);
                                opacity: 0.8;
                            }
                            50% { 
                                transform: scale(1.02);
                                opacity: 1;
                            }
                            100% { 
                                transform: scale(1);
                                opacity: 0.8;
                            }
                        }
                    </style>
                </head>
                <body>
                    <canvas id="shader-canvas"></canvas>
                    <div class="message-overlay">
                        <div class="decree">By decree of Nazarick</div>
                        <h1>This domain is forbidden</h1>
                        <div class="command">Kneel before the glory of the Supreme One</div>
                    </div>
                </body>
            `;

            // Initialize WebGL shader
            window.addEventListener('load', () => {
                resizeCanvas();
                const webglData = setupWebGL();
                if (webglData) {
                    render(webglData);
                } else {
                    // Fallback to Nazarick-themed gradient if WebGL fails
                    document.body.style.background = 'linear-gradient(45deg, #0a0510, #8b0000, #d4af37, #4b0082, #1a1a1a)';
                    document.body.style.backgroundSize = '400% 400%';
                    document.body.style.animation = 'nazarickGradientShift 15s ease infinite';
                    
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes nazarickGradientShift {
                            0% { background-position: 0% 50%; }
                            25% { background-position: 100% 25%; }
                            50% { background-position: 100% 75%; }
                            75% { background-position: 0% 100%; }
                            100% { background-position: 0% 50%; }
                        }
                    `;
                    document.head.appendChild(style);
                }
            });

            window.addEventListener('resize', resizeCanvas);
        })();
    </script>
</body>
</html>